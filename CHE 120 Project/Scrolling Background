import pygame
import math

# Initialize Pygame
pygame.init()

# Screen setup
screen_width = 1920
screen_height = 1080
screen = pygame.display.set_mode((screen_width, screen_height))
pygame.display.set_caption("Infinite Scrolling Background")

# Load background image
background_img = pygame.image.load("g_background.png").convert()
background_height = background_img.get_height()

# Calculate how many copies needed to cover the screen + 1 extra
copies_needed = math.ceil(screen_height / background_height) + 2

# Create a list of Y positions for each copy
bg_positions = [i * -background_height for i in range(copies_needed)]

# Scroll speed settings
scroll_speed = 2          # Starting speed
speed_increase = 0.001    # Gradual acceleration
max_speed = 10            # Optional cap
running = True
clock = pygame.time.Clock()

while running:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            running = False

    # Gradually increase speed
    scroll_speed += speed_increase
    if scroll_speed > max_speed:
        scroll_speed = max_speed

    # Move all backgrounds down
    for i in range(len(bg_positions)):
        bg_positions[i] += scroll_speed

    # Reset positions when off-screen
    for i in range(len(bg_positions)):
        if bg_positions[i] >= screen_height:
            bg_positions[i] = min(bg_positions) - background_height

    # Draw all backgrounds
    for y in bg_positions:
        screen.blit(background_img, (0, y))

    pygame.display.flip()
    clock.tick(60)

pygame.quit()
